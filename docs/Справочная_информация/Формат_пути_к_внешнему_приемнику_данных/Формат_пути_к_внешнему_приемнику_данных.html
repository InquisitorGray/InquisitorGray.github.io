<h1 id="формат-пути-к-внешнему-приемнику-данных">Формат пути к внешнему приемнику данных</h1>

<p>При создании <a href="../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md">внешних таблиц загрузки и выгрузки</a> 
данных необходимо указать путь (URI-строку) к внешнему приемнику данных, из которого извлекаются или 
в который помещаются данные. Для обоих типов внешних таблиц используется одинаковый формат URI-строки.</p>

<p>Доступны следующие способы указания пути к топику Kafka, расположенному на узлах кластера Zookeeper:</p>
<ul>
  <li>полный путь к топику,</li>
  <li>путь к топику с использованием переменной, определенной в конфигурации системы.</li>
</ul>

<h2 id="указание-полного-пути-к-топику">Указание полного пути к топику</h2>

<p>Чтобы указать полный путь к топику Kafka, задайте URI-строку в следующем формате:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kafka</span><span class="p">:</span><span class="o">//</span><span class="n">zkhost_1</span><span class="p">:</span><span class="n">port_1</span><span class="p">,</span><span class="n">zkhost_2</span><span class="p">:</span><span class="n">port_2</span><span class="p">,</span><span class="n">zkhost_3</span><span class="p">:</span><span class="n">port_3</span><span class="o">/</span><span class="n">chroot</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">topic_name</span>
</code></pre></div></div>
<p>Где:</p>
<ul>
  <li><code class="language-sql highlighter-rouge"><span class="n">zkhost_N</span></code> (обязательный) — имя хоста или IP-адрес хоста Zookeeper, к которому подключен брокер 
сообщений Kafka;</li>
  <li><code class="language-sql highlighter-rouge"><span class="n">port_N</span></code> (обязательный) — порт хоста Zookeeper, к которому подключен брокер сообщений Kafka. 
Должен соответствовать порту, заданному в конфигурации Zookeeper для подключения клиентов 
(по умолчанию — 2181);</li>
  <li><code class="language-sql highlighter-rouge"><span class="n">chroot</span><span class="o">/</span><span class="n">path</span></code> — путь chroot к метаданным кластера Kafka. Следует использовать при наличии 
нескольких узлов Kafka в одном кластере Zookeeper;</li>
  <li><code class="language-sql highlighter-rouge"><span class="n">topic_name</span></code> (обязательный) — имя топика Kafka.</li>
</ul>

<h3 id="примеры">Примеры</h3>

<p>Имена нескольких хостов с непустым путем chroot (<code class="language-sql highlighter-rouge"><span class="n">chroot_kafka</span></code>):</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kafka</span><span class="p">:</span><span class="o">//</span><span class="n">zk1</span><span class="p">:</span><span class="mi">2181</span><span class="p">,</span><span class="n">zk2</span><span class="p">:</span><span class="mi">2181</span><span class="p">,</span><span class="n">zk3</span><span class="p">:</span><span class="mi">2181</span><span class="o">/</span><span class="n">chroot_kafka</span><span class="o">/</span><span class="n">sales</span>
</code></pre></div></div>

<p>IP-адрес одного хоста:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kafka</span><span class="p">:</span><span class="o">//</span><span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">60</span><span class="p">.</span><span class="mi">97</span><span class="p">:</span><span class="mi">2181</span><span class="o">/</span><span class="n">chroot_kafka</span><span class="o">/</span><span class="n">sales</span>
</code></pre></div></div>

<h2 id="указание-пути-к-топику-с-использованием-переменной">Указание пути к топику с использованием переменной</h2>

<p>Чтобы указать путь к топику Kafka с использованием переменной конфигурации, задайте URI-строку 
в следующем формате:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kafka</span><span class="p">:</span><span class="o">//</span><span class="err">$</span><span class="n">kafka</span><span class="o">/</span><span class="n">topic_name</span>
</code></pre></div></div>

<h3 id="пример">Пример</h3>

<p>Пример пути к топику <code class="language-sql highlighter-rouge"><span class="n">sales</span></code>:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kafka</span><span class="p">:</span><span class="o">//</span><span class="err">$</span><span class="n">kafka</span><span class="o">/</span><span class="n">sales</span>
</code></pre></div></div>
