<h1 id="commit-delta">COMMIT DELTA</h1>

<p>Запрос позволяет закрыть открытую (горячую) <a href="../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md">дельту</a>. 
Дата и время закрытия дельты могут быть указаны в запросе или установлены системой.</p>

<p>Перед выполнением запроса необходимо определить логическую базу данных, 
<a href="../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md">используемую по умолчанию</a>, 
если она еще не определена.</p>

<p>В ответе возвращается:</p>
<ul>
  <li>объект ResultSet c одной записью, содержащей информацию о дате и времени закрытия дельты, 
при успешном выполнении запроса;</li>
  <li>исключение при неуспешном выполнении запроса.</li>
</ul>

<p>При успешном выполнении запроса горячие записи дельты перемещаются в категорию актуальных, 
а зафиксированные ранее записи, которые больше не являются актуальными, — в категорию архивных. 
Дельта закрывается и становится недоступна для загрузки данных. Подробнее о порядке обновления записей 
см. в разделе <a href="../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Физическая_таблица/Физическая_таблица.md">Физическая таблица</a>.</p>

<p>В качестве даты и времени закрытия дельты устанавливаются дата и время, указанные в запросе (если они 
указаны и корректны) или определенные системой (если дата и время не указаны).</p>

<h2 id="синтаксис">Синтаксис</h2>

<p>Закрытие открытой дельты:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">COMMIT</span> <span class="n">DELTA</span>
</code></pre></div></div>

<p>Закрытие открытой дельты с указанными датой и временем закрытия:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">COMMIT</span> <span class="n">DELTA</span> <span class="k">SET</span> <span class="n">date_time_expression</span>
</code></pre></div></div>

<h2 id="параметры">Параметры</h2>

<ul>
  <li><code class="language-sql highlighter-rouge"><span class="n">date_time_expression</span></code> — метка даты и времени вида <code class="language-sql highlighter-rouge"><span class="s1">'YYYY-MM-DD HH:MM:SS'</span></code>.</li>
</ul>

<h2 id="ограничения">Ограничения</h2>

<p>Если в запросе указаны дата и время закрытия дельты, они должны быть больше, чем дата и время последней 
закрытой дельты. Дату и время последней закрытой дельты можно узнать, выполнив запрос 
<a href="../GET_DELTA_OK/GET_DELTA_OK.md">GET_DELTA_OK</a>.</p>

<h2 id="пример">Пример</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">COMMIT</span> <span class="n">DELTA</span> <span class="k">SET</span> <span class="s1">'2021-03-21 09:29:54'</span>
</code></pre></div></div>
