<h1 id="check_table">CHECK_TABLE</h1>

<p>Запрос позволяет проверить соответствие <a href="../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md">логической таблицы</a> 
и ее физических представлений — <a href="../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Физическая_таблица/Физическая_таблица.md">физических таблиц</a> 
в <a href="../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md">хранилище данных</a>.</p>

<p>В проверке участвуют указанная логическая таблица и все связанные с ней физические таблицы. Если СУБД 
хранилища не хранит данные логической таблицы, и, следовательно, не содержит связанные физические таблицы, 
она пропускается при проверке.</p>

<p>Проверяется соответствие следующих элементов:</p>
<ul>
  <li>имен и порядка следования столбцов,</li>
  <li>типов данных столбцов,</li>
  <li>первичного ключа.</li>
</ul>

<p>Имена и порядок следования проверяются для всех столбцов логической и физических таблиц, включая служебные 
столбцы, имеющиеся только у физических таблиц. Например, если служебный столбец <code class="language-sql highlighter-rouge"><span class="n">sys_to</span></code> удален из 
физической таблицы, в ответе вернется сообщение о расхождении.</p>

<p>В ответе возвращается:</p>
<ul>
  <li>объект ResultSet с одной записью, содержащей результаты проверки, при успешном выполнении запроса;</li>
  <li>исключение при неуспешном выполнении запроса.</li>
</ul>

<p>Возвращаемая информация включает сообщение об успешной проверке или найденных расхождениях, а также список 
проверенных СУБД хранилища.<br />
На рисунках ниже показаны примеры ответа в случае успешной проверки. В первом примере проверка выполнена 
для логической таблицы, данные которой размещены во всех СУБД хранилища, во втором — для таблицы, данные 
которой размещены только в ADB.</p>

<p class="figure-center"><img src="check_table_без_расхождений_3_бд.png" alt="" height="50%" width="50%" /></p>
<p class="figure-caption-center"><em>Ответ CHECK_TABLE при успешной проверке</em></p>

<p class="figure-center"><img src="check_table_без_расхождений_1_бд.png" alt="" height="50%" width="50%" /></p>
<p class="figure-caption-center"><em>Ответ CHECK_TABLE с проверкой только в ADB</em></p>

<p>На рисунке ниже показан пример ответа при наличии расхождений. Проверка прошла успешно для ADG и ADQM, 
а в ADB найдено несоответствие — столбец <code class="language-sql highlighter-rouge"><span class="n">description</span></code> отсутсвует в физической таблице с архивными записями.</p>

<p class="figure-center"><img src="check_table_с_расхождениями.png" alt="" /></p>
<p class="figure-caption-center"><em>Ответ CHECK_TABLE с найденными расхождениями</em></p>

<h2 id="синтаксис">Синтаксис</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CHECK_TABLE</span><span class="p">([</span><span class="n">db_name</span><span class="p">.]</span><span class="k">table_name</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="параметры">Параметры</h2>

<ul>
  <li><code class="language-sql highlighter-rouge"><span class="n">db_name</span></code> — имя логической базы данных, которой принадлежит проверяемая логическая таблица. 
Указывается опционально, если выбрана логическая БД, <a href="../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md">используемая по умолчанию</a>;</li>
  <li><code class="language-sql highlighter-rouge"><span class="k">table_name</span></code> — имя проверяемой логической таблицы.</li>
</ul>

<h2 id="пример">Пример</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CHECK_TABLE</span><span class="p">(</span><span class="n">sales</span><span class="p">.</span><span class="n">stores</span><span class="p">)</span>
</code></pre></div></div>
