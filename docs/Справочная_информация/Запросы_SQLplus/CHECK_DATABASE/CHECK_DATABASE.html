<h1 id="check_database">CHECK_DATABASE</h1>

<p>Запрос позволяет проверить соответствие <a href="../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md">логических таблиц</a> 
<a href="../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md">логической базы данных</a> 
и их физических представлений — <a href="../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Физическая_таблица/Физическая_таблица.md">физических таблиц</a> 
в <a href="../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md">хранилище данных</a>.</p>

<p>В проверке участвуют логические таблицы логической базы данных и все связанные с ними физические таблицы. 
Если СУБД хранилища не хранит данные логической таблицы, и, следовательно, не содержит связанные 
физические таблицы, она пропускается при проверке логической таблицы.</p>

<p>Проверяется соответствие следующих элементов:</p>
<ul>
  <li>имен и порядка следования столбцов,</li>
  <li>типов данных столбцов,</li>
  <li>первичного ключа.</li>
</ul>

<p>Имена и порядок следования проверяются для всех столбцов логических и физических таблиц, включая 
служебные столбцы, имеющиеся только у физических таблиц. Например, если служебный столбец <code class="language-sql highlighter-rouge"><span class="n">sys_to</span></code> 
удален из физической таблицы, в ответе вернется сообщение о расхождении.</p>

<p>В ответе возвращается:</p>
<ul>
  <li>объект ResultSet с одной записью, содержащей результаты проверки, при успешном выполнении запроса;</li>
  <li>исключение при неуспешном выполнении запроса.</li>
</ul>

<p>Возвращаемая информация включает сообщение об успешной проверке или найденных расхождениях, а также 
список проверенных СУБД хранилища.</p>

<p>На рисунках ниже показаны примеры ответов: на первом — ответ при отсутствии расхождений, на втором — 
при наличии расхождений. Расхождения вызваны тем, что в целях иллюстрации между первым и вторым запросом 
столбец <code class="language-sql highlighter-rouge"><span class="n">description</span></code> был переименован в ADB.</p>

<p class="figure-center"><img src="check_database_без_расхождений.png" alt="" height="50%" width="50%" /></p>
<p class="figure-caption-center"><em>Ответ CHECK_DATABASE при успешной проверке</em></p>

<p class="figure-center"><img src="check_database_с_расхождениями.png" alt="" /></p>
<p class="figure-caption-center"><em>Ответ CHECK_DATABASE с найденными расхождениями</em></p>

<h2 id="синтаксис">Синтаксис</h2>

<p>Проверка логической базы данных, <a href="../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md">выбранной по умолчанию</a>:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CHECK_DATABASE</span><span class="p">()</span>
</code></pre></div></div>

<p>Проверка указанной логической базы данных:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CHECK_DATABASE</span><span class="p">(</span><span class="n">db_name</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="параметры">Параметры</h2>

<ul>
  <li><code class="language-sql highlighter-rouge"><span class="n">db_name</span></code> — имя логической базы данных, для таблиц которой выполняется проверка.</li>
</ul>

<h2 id="пример">Пример</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CHECK_DATABASE</span><span class="p">(</span><span class="n">sales</span><span class="p">)</span>
</code></pre></div></div>
