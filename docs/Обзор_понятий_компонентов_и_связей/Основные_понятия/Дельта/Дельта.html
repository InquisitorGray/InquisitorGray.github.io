<h1 id="дельта">Дельта</h1>

<p><em>Дельта</em> — целостная совокупность изменений в <a href="../Логическая_база_данных/Логическая_база_данных.md">логической базе данных</a>. 
Дельта включает все <a href="../Операция_записи/Операция_записи.md">операции записи</a>, 
выполненные между открытием и закрытием этой дельты, и имеет порядковый номер, уникальный в рамках 
логической базы данных.</p>

<p>Нумерация дельт начинается с 0. Дельты упорядочены в порядке возрастания их номеров и формируют историю 
состояний данных логической БД.</p>

<p>На рисунке ниже показана последовательность операций записи, выполненных в рамках дельт с номерами 0 и 1. 
В рамках дельты 0 выполнены операции записи с номерами 0-2, в рамках дельты 1 — операции записи с номерами 3-6.</p>

<p class="figure-center"><img src="Операции_в_дельте.svg" alt="" /></p>
<p class="figure-caption-center"><em>Операции записи двух дельт</em></p>

<p>Дельту можно <a href="../../../Справочная_информация/Запросы_SQLplus/BEGIN_DELTA/BEGIN_DELTA.md">открыть</a>, 
<a href="../../../Справочная_информация/Запросы_SQLplus/COMMIT_DELTA/COMMIT_DELTA.md">закрыть</a> и 
<a href="../../../Справочная_информация/Запросы_SQLplus/ROLLBACK_DELTA/ROLLBACK_DELTA.md">отменить</a>. 
Дельта, которая была открыта и еще не была закрыта, содержит горячие записи и называется открытой 
или горячей. Для каждой логической базы одновременно может быть открыто не более одной дельты. 
Дельта, которая была закрыта (зафиксирована) содержит актуальные записи и называется закрытой.</p>

<p>На рисунке ниже показана последовательность дельт, где дельта с номером 3 является открытой, а все 
предыдущие — закрытыми.</p>

<p class="figure-center"><img src="Типы_дельт.svg" alt="" /></p>
<p class="figure-caption-center"><em>Открытая и закрытые дельты</em></p>

<p>Для <a href="../../../Работа_с_системой/Загрузка_данных/Загрузка_данных.md">загрузки данных</a> 
в логическую БД нужно открыть дельту, загрузить данные в требуемые логические таблицы, 
после чего сохранить изменения (закрыть дельту). В рамках открытой дельты можно выполнить 
произвольное число операций записи.</p>

<p><strong>Примечание:</strong> не допускается загрузка различных состояний одного и того же объекта 
в рамках одной дельты. Для загрузки обновленных данных объекта нужно закрыть открытую дельту, открыть 
новую дельту и загрузить необходимые изменения (см. пример на рисунке <a href="#img_data_update">ниже</a>).</p>

<p>На рисунке ниже показан пример обновления данных клиента, сменившего фамилию. Первоначальные данные 
клиента загружены в рамках дельты 0, а обновленные данные — в рамках дельты 1.</p>

<p class="figure-center"><a id="img_data_update"></a>
<img src="Обновление_данных.svg" alt="" /></p>
<p class="figure-caption-center"><em>Обновление данных клиента, сменившего фамилию</em></p>

<p>Если нужно вернуть состояние данных, которое предшествовало изменениям, выполненным в рамках открытой 
дельты, следует <a href="../../../Справочная_информация/Запросы_SQLplus/ROLLBACK_DELTA/ROLLBACK_DELTA.md">откатить дельту</a>. 
Откат дельты возможен только для открытой дельты, после закрытия дельты возврат к предыдущему состоянию 
недоступен.</p>

<p>При запросе и выгрузке данных номер дельты можно использовать, чтобы указать момент или период, 
по состоянию на который запрашивается информация (см. директиву <a href="../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md#sect_for_system_time">FOR SYSTEM_TIME</a> 
в разделе <a href="../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md">SELECT</a>).</p>
